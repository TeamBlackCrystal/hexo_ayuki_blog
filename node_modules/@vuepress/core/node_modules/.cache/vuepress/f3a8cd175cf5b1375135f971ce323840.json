{"remainingRequest":"/home/yupix/Desktop/Github/ayuki_blog/node_modules/babel-loader/lib/index.js??ref--15-1!/home/yupix/Desktop/Github/ayuki_blog/lib/plugins/blog-vuepress/enhanceAppFile.js","dependencies":[{"path":"/home/yupix/Desktop/Github/ayuki_blog/lib/plugins/blog-vuepress/enhanceAppFile.js","mtime":1587651708000},{"path":"/home/yupix/Desktop/Github/ayuki_blog/node_modules/cache-loader/dist/cjs.js","mtime":1587644086000},{"path":"/home/yupix/Desktop/Github/ayuki_blog/node_modules/babel-loader/lib/index.js","mtime":1587644580000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gZm9yayBhbmQgbW9kaWZ5IGZyb20gQHZ1ZXByZXNzL3BsdWdpbi1ibG9nCmltcG9ydCB7IGZpbmRQYWdlQnlLZXkgfSBmcm9tICdAYXBwL3V0aWwnOwppbXBvcnQgdGFnTWV0YSBmcm9tICdAZHluYW1pYy90YWcnOwppbXBvcnQgY2F0ZWdvcnlNZXRhIGZyb20gJ0BkeW5hbWljL2NhdGVnb3J5JzsKCmNsYXNzIENsYXNzaWZpYWJsZSB7CiAgY29uc3RydWN0b3IobWV0YU1hcCwgcGFnZXMpIHsKICAgIHRoaXMuX21ldGFNYXAgPSBPYmplY3QuYXNzaWduKHt9LCBtZXRhTWFwKTsKICAgIE9iamVjdC5rZXlzKHRoaXMuX21ldGFNYXApLmZvckVhY2gobmFtZSA9PiB7CiAgICAgIGNvbnN0IHsKICAgICAgICBwYWdlS2V5cwogICAgICB9ID0gdGhpcy5fbWV0YU1hcFtuYW1lXTsKICAgICAgdGhpcy5fbWV0YU1hcFtuYW1lXS5wb3N0cyA9IHBhZ2VLZXlzLm1hcChrZXkgPT4gZmluZFBhZ2VCeUtleShwYWdlcywga2V5KSk7CiAgICB9KTsKICB9CgogIGdldCBsZW5ndGgoKSB7CiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fbWV0YU1hcCkubGVuZ3RoOwogIH0KCiAgZ2V0IG1hcCgpIHsKICAgIHJldHVybiB0aGlzLl9tZXRhTWFwOwogIH0KCiAgZ2V0IGxpc3QoKSB7CiAgICByZXR1cm4gdGhpcy50b0FycmF5KCk7CiAgfQoKICB0b0FycmF5KCkgewogICAgY29uc3QgdGFncyA9IFtdOwogICAgT2JqZWN0LmtleXModGhpcy5fbWV0YU1hcCkuZm9yRWFjaChuYW1lID0+IHsKICAgICAgY29uc3QgewogICAgICAgIHBvc3RzLAogICAgICAgIHBhdGgKICAgICAgfSA9IHRoaXMuX21ldGFNYXBbbmFtZV07CiAgICAgIHRhZ3MucHVzaCh7CiAgICAgICAgbmFtZSwKICAgICAgICBwb3N0cywKICAgICAgICBwYXRoCiAgICAgIH0pOwogICAgfSk7CiAgICByZXR1cm4gdGFnczsKICB9CgogIGdldEl0ZW1CeU5hbWUobmFtZSkgewogICAgcmV0dXJuIHRoaXMuX21ldGFNYXBbbmFtZV07CiAgfQoKfQoKZXhwb3J0IGRlZmF1bHQgKCh7CiAgVnVlCn0pID0+IHsKICBWdWUubWl4aW4oewogICAgY29tcHV0ZWQ6IHsKICAgICAgJHRhZ3MoKSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgcGFnZXMKICAgICAgICB9ID0gdGhpcy4kc2l0ZTsKICAgICAgICBjb25zdCB0YWdzID0gbmV3IENsYXNzaWZpYWJsZSh0YWdNZXRhLCBwYWdlcyk7CiAgICAgICAgcmV0dXJuIHRhZ3M7CiAgICAgIH0sCgogICAgICAkdGFnKCkgewogICAgICAgIGNvbnN0IHRhZ05hbWUgPSB0aGlzLiRyb3V0ZS5tZXRhLnRhZ05hbWU7CiAgICAgICAgcmV0dXJuIHRoaXMuJHRhZ3MuZ2V0SXRlbUJ5TmFtZSh0YWdOYW1lKTsKICAgICAgfSwKCiAgICAgICRjYXRlZ29yaWVzKCkgewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIHBhZ2VzCiAgICAgICAgfSA9IHRoaXMuJHNpdGU7CiAgICAgICAgY29uc3QgY2F0ZWdvcmllcyA9IG5ldyBDbGFzc2lmaWFibGUoY2F0ZWdvcnlNZXRhLCBwYWdlcyk7CiAgICAgICAgcmV0dXJuIGNhdGVnb3JpZXM7CiAgICAgIH0sCgogICAgICAkY2F0ZWdvcnkoKSB7CiAgICAgICAgY29uc3QgY2F0ZWdvcnlOYW1lID0gdGhpcy4kcm91dGUubWV0YS5jYXRlZ29yeU5hbWU7CiAgICAgICAgcmV0dXJuIHRoaXMuJGNhdGVnb3JpZXMuZ2V0SXRlbUJ5TmFtZShjYXRlZ29yeU5hbWUpOwogICAgICB9CgogICAgfQogIH0pOwp9KTs="},{"version":3,"sources":["/home/yupix/Desktop/Github/ayuki_blog/lib/plugins/blog-vuepress/enhanceAppFile.js"],"names":["findPageByKey","tagMeta","categoryMeta","Classifiable","constructor","metaMap","pages","_metaMap","Object","assign","keys","forEach","name","pageKeys","posts","map","key","length","list","toArray","tags","path","push","getItemByName","Vue","mixin","computed","$tags","$site","$tag","tagName","$route","meta","$categories","categories","$category","categoryName"],"mappings":"AAAA;AAEA,SAASA,aAAT,QAA8B,WAA9B;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;;AAEA,MAAMC,YAAN,CAAmB;AACjBC,EAAAA,WAAW,CAAEC,OAAF,EAAWC,KAAX,EAAkB;AAC3B,SAAKC,QAAL,GAAgBC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,OAAlB,CAAhB;AACAG,IAAAA,MAAM,CAACE,IAAP,CAAY,KAAKH,QAAjB,EAA2BI,OAA3B,CAAmCC,IAAI,IAAI;AACzC,YAAM;AAAEC,QAAAA;AAAF,UAAe,KAAKN,QAAL,CAAcK,IAAd,CAArB;AACA,WAAKL,QAAL,CAAcK,IAAd,EAAoBE,KAApB,GAA4BD,QAAQ,CAACE,GAAT,CAAaC,GAAG,IAAIhB,aAAa,CAACM,KAAD,EAAQU,GAAR,CAAjC,CAA5B;AACD,KAHD;AAID;;AAED,MAAIC,MAAJ,GAAc;AACZ,WAAOT,MAAM,CAACE,IAAP,CAAY,KAAKH,QAAjB,EAA2BU,MAAlC;AACD;;AAED,MAAIF,GAAJ,GAAW;AACT,WAAO,KAAKR,QAAZ;AACD;;AAED,MAAIW,IAAJ,GAAY;AACV,WAAO,KAAKC,OAAL,EAAP;AACD;;AAEDA,EAAAA,OAAO,GAAI;AACT,UAAMC,IAAI,GAAG,EAAb;AACAZ,IAAAA,MAAM,CAACE,IAAP,CAAY,KAAKH,QAAjB,EAA2BI,OAA3B,CAAmCC,IAAI,IAAI;AACzC,YAAM;AAAEE,QAAAA,KAAF;AAASO,QAAAA;AAAT,UAAkB,KAAKd,QAAL,CAAcK,IAAd,CAAxB;AACAQ,MAAAA,IAAI,CAACE,IAAL,CAAU;AAAEV,QAAAA,IAAF;AAAQE,QAAAA,KAAR;AAAeO,QAAAA;AAAf,OAAV;AACD,KAHD;AAIA,WAAOD,IAAP;AACD;;AAEDG,EAAAA,aAAa,CAAEX,IAAF,EAAQ;AACnB,WAAO,KAAKL,QAAL,CAAcK,IAAd,CAAP;AACD;;AAhCgB;;AAmCnB,gBAAe,CAAC;AAAEY,EAAAA;AAAF,CAAD,KAAa;AAC1BA,EAAAA,GAAG,CAACC,KAAJ,CAAU;AACRC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,KAAK,GAAI;AACP,cAAM;AAAErB,UAAAA;AAAF,YAAY,KAAKsB,KAAvB;AACA,cAAMR,IAAI,GAAG,IAAIjB,YAAJ,CAAiBF,OAAjB,EAA0BK,KAA1B,CAAb;AACA,eAAOc,IAAP;AACD,OALO;;AAMRS,MAAAA,IAAI,GAAI;AACN,cAAMC,OAAO,GAAG,KAAKC,MAAL,CAAYC,IAAZ,CAAiBF,OAAjC;AACA,eAAO,KAAKH,KAAL,CAAWJ,aAAX,CAAyBO,OAAzB,CAAP;AACD,OATO;;AAURG,MAAAA,WAAW,GAAI;AACb,cAAM;AAAE3B,UAAAA;AAAF,YAAY,KAAKsB,KAAvB;AACA,cAAMM,UAAU,GAAG,IAAI/B,YAAJ,CAAiBD,YAAjB,EAA+BI,KAA/B,CAAnB;AACA,eAAO4B,UAAP;AACD,OAdO;;AAeRC,MAAAA,SAAS,GAAI;AACX,cAAMC,YAAY,GAAG,KAAKL,MAAL,CAAYC,IAAZ,CAAiBI,YAAtC;AACA,eAAO,KAAKH,WAAL,CAAiBV,aAAjB,CAA+Ba,YAA/B,CAAP;AACD;;AAlBO;AADF,GAAV;AAsBD,CAvBD","sourcesContent":["// fork and modify from @vuepress/plugin-blog\n\nimport { findPageByKey } from '@app/util'\nimport tagMeta from '@dynamic/tag'\nimport categoryMeta from '@dynamic/category'\n\nclass Classifiable {\n  constructor (metaMap, pages) {\n    this._metaMap = Object.assign({}, metaMap)\n    Object.keys(this._metaMap).forEach(name => {\n      const { pageKeys } = this._metaMap[name]\n      this._metaMap[name].posts = pageKeys.map(key => findPageByKey(pages, key))\n    })\n  }\n\n  get length () {\n    return Object.keys(this._metaMap).length\n  }\n\n  get map () {\n    return this._metaMap\n  }\n\n  get list () {\n    return this.toArray()\n  }\n\n  toArray () {\n    const tags = []\n    Object.keys(this._metaMap).forEach(name => {\n      const { posts, path } = this._metaMap[name]\n      tags.push({ name, posts, path })\n    })\n    return tags\n  }\n\n  getItemByName (name) {\n    return this._metaMap[name]\n  }\n}\n\nexport default ({ Vue }) => {\n  Vue.mixin({\n    computed: {\n      $tags () {\n        const { pages } = this.$site\n        const tags = new Classifiable(tagMeta, pages)\n        return tags\n      },\n      $tag () {\n        const tagName = this.$route.meta.tagName\n        return this.$tags.getItemByName(tagName)\n      },\n      $categories () {\n        const { pages } = this.$site\n        const categories = new Classifiable(categoryMeta, pages)\n        return categories\n      },\n      $category () {\n        const categoryName = this.$route.meta.categoryName\n        return this.$categories.getItemByName(categoryName)\n      },\n    },\n  })\n}\n"]}]}